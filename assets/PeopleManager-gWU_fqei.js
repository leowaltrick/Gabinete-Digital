import{i as S,s as x,j as e,S as F,f as E,P as Ke,D as Qe,a as J}from"./index-CspjNraa.js";import{r,G as Xe,U as Y,j as Je,X as Ye,a7 as Ze,ai as Se,Q as Me,n as et,m as Ee,x as tt,k as De,w as Le,q as st,t as at,o as rt}from"./vendor-C-faMDs8.js";import"./db-6BX2OcUF.js";import"./maps-wR2f8fXB.js";const lt=(c,w,b)=>{if(!c||c.length===0){alert("Não há dados para exportar com os filtros atuais.");return}const D="data:text/csv;charset=utf-8,"+"\uFEFF"+[w.join(","),...c.map(i=>i.join(","))].join(`
`),L=encodeURI(D),u=document.createElement("a"),j=new Date,q=j.toLocaleDateString("pt-BR").split("/").reverse().join("-"),P=j.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}).replace(":","-");u.setAttribute("href",L),u.setAttribute("download",`${b}_${q}_${P}.csv`),document.body.appendChild(u),u.click(),document.body.removeChild(u)},bt=({isModalMode:c=!1,onSelectPerson:w,initialSearchTerm:b,initialMode:k="list",onCreateDemand:D,onEditDemand:L,onUpdateStatus:u,onModeChange:j,onInteractionUpdate:q,onPersonUpdate:P,onNotification:i,permissions:Z,onClearSelection:M})=>{var Ce;const[d,f]=r.useState("list"),[l,$]=r.useState(null),[h,H]=r.useState([]),[v,O]=r.useState(""),[Pe,ee]=r.useState(!1),[U,te]=r.useState(1),B=10,[ot,se]=r.useState([]),[nt,ae]=r.useState(!1),[re,R]=r.useState(null),[N,z]=r.useState(!1),[le,V]=r.useState(""),[oe,G]=r.useState(""),[ne,T]=r.useState(""),[ie,p]=r.useState([]),[A,W]=r.useState(""),[$e,de]=r.useState(""),[it,dt]=r.useState(!1),[Be,ce]=r.useState(""),[ze,me]=r.useState(""),[Te,xe]=r.useState(""),[Ae,he]=r.useState(""),[_e,ue]=r.useState(""),[Ie,be]=r.useState(""),[ct,fe]=r.useState(!1),[pe,ge]=r.useState(!1),[y,K]=r.useState(null),[Q,X]=r.useState(null),_=Z?Z.canCreateCitizen:!0;r.useEffect(()=>{j&&j(d)},[d,j]),r.useEffect(()=>{k&&k!=="list"&&k==="form"&&d!=="form"&&ve()},[k]),r.useEffect(()=>{b?(async()=>{const a=J(b);if(S()&&x){const{data:s}=await x.from("citizens").select("*").eq("telefone",a).maybeSingle();s?(H([s]),$(s),f("details")):(O(b),f("list"))}})():d==="list"&&we()},[b]),r.useEffect(()=>{d==="list"&&!b&&h.length===0&&we()},[d]),r.useEffect(()=>{d==="details"&&l&&Fe(l.id||"")},[d,l]);const we=async()=>{ee(!0);try{if(S()&&x){const{data:t,error:a}=await x.from("citizens").select("*").order("created_at",{ascending:!1}).limit(1e3);if(a)throw a;t&&H(t)}}catch(t){console.error("Erro ao buscar pessoas:",t)}finally{ee(!1)}},Fe=async t=>{ae(!0);try{if(S()&&x){let a=x.from("demands").select("*").eq("citizen_id",t);const{data:s,error:n}=await a.order("created_at",{ascending:!1});if(n)throw n;if(s){const m=s.map(o=>({id:o.id,title:o.title,description:o.description,level:o.level,status:o.status,priority:o.priority,type:o.type,deadline:o.deadline,citizenId:o.citizen_id,createdAt:o.created_at,tags:o.tags}));se(m)}}}catch(a){console.error("Erro ao buscar histórico:",a)}finally{ae(!1)}},je=()=>{V(""),G(""),T(""),p([]),W(""),de(""),ce(""),me(""),xe(""),he(""),ue(""),be(""),K(null),z(!1),X(null)},ve=()=>{if(!_){i&&i("error","Sem permissão para criar cidadãos.");return}je(),z(!1),f("form")},ke=()=>{je(),$(null),f("list"),M&&M()},Ne=t=>{if(c&&w){w(t);return}$(t),f("details")},qe=()=>{if(l){if(!_){i&&i("error","Sem permissão para editar.");return}V(l.nome||""),G(l.sobrenome||""),T(l.email||""),W(E(l.telefone||"")),de(l.cep||""),ce(l.logradouro||""),me(l.numero||""),xe(l.complemento||""),he(l.bairro||""),ue(l.cidade||""),be(l.estado||""),K(l),z(!0),f("form")}},He=async()=>{if(N)return;const t=J(A);if(t){if(t.length<10){X("Telefone inválido");return}fe(!0);try{if(S()&&x){const{data:a}=await x.from("citizens").select("*").eq("telefone",t).maybeSingle();a&&(K(a),i&&i("error","Este telefone já possui cadastro."))}}catch(a){console.error(a)}finally{fe(!1)}}},Oe=t=>{if(T(t),!t){p([]);return}const a=["gmail.com","hotmail.com","outlook.com","yahoo.com.br","icloud.com"];if(a.some(s=>t.endsWith("@"+s))){p([]);return}if(!t.includes("@"))p(a.map(s=>`${t}@${s}`));else{const[s,n]=t.split("@"),m=a.filter(o=>o.startsWith(n));m.length>0?p(m.map(o=>`${s}@${o}`)):p([])}},Ue=t=>{T(t),p([])},Re=async t=>{t.preventDefault();const a=A?J(A):null;if(!a){X("É necessário informar o Telefone."),i&&i("error","Informe o Telefone.");return}ge(!0);const s={nome:le,sobrenome:oe,email:ne||null,telefone:a,cep:$e.replace(/\D/g,""),logradouro:Be,numero:ze,complemento:Te||null,bairro:Ae,cidade:_e,estado:Ie.substring(0,2).toUpperCase()};try{if(S()&&x){let n;if(N&&(y!=null&&y.id)){const{data:o,error:g}=await x.from("citizens").update(s).eq("id",y.id).select().single();if(g)throw g;n=o,i&&i("success","Dados atualizados!")}else{const{data:o,error:g}=await x.from("citizens").insert(s).select().single();if(g)throw g;n=o,i&&i("success","Cidadão cadastrado!")}P&&P();const m=N?h.map(o=>o.id===n.id?n:o):[n,...h];H(m),c&&w?w(n):setTimeout(()=>{$(n),f("details"),z(!1)},1500)}else i&&i("error","Erro de conexão.")}catch(n){i&&i("error",`Erro: ${n.message}`)}finally{ge(!1)}},C=r.useMemo(()=>h.filter(t=>{const a=v.toLowerCase(),s=`${t.nome} ${t.sobrenome}`.toLowerCase(),n=t.telefone?t.telefone.replace(/\D/g,""):"",m=v.replace(/\D/g,"");return s.includes(a)||m.length>3&&n.includes(m)||t.email&&t.email.toLowerCase().includes(a)}),[h,v]),I=r.useMemo(()=>{const t=h.length,a=new Date().toDateString(),s=h.filter(o=>o.created_at&&new Date(o.created_at).toDateString()===a).length,n={};h.forEach(o=>{o.bairro&&(n[o.bairro]=(n[o.bairro]||0)+1)});const m=Object.entries(n).sort((o,g)=>g[1]-o[1])[0];return{total:t,newToday:s,topBairro:m?m[0]:"N/A",topBairroCount:m?m[1]:0}},[h]);r.useEffect(()=>{te(1)},[v]);const Ve=Math.ceil(C.length/B),ye=C.slice((U-1)*B,U*B),Ge=()=>{const t=["Nome","Sobrenome","Telefone","Email","Logradouro","Número","Bairro","Cidade","UF","CEP","Data Cadastro"],a=C.map(s=>[`"${s.nome}"`,`"${s.sobrenome}"`,s.telefone||"",s.email||"",`"${s.logradouro}"`,s.numero,`"${s.bairro}"`,`"${s.cidade}"`,s.estado,s.cep,s.created_at?new Date(s.created_at).toLocaleDateString():""]);lt(a,t,"Cidadaos")},We=t=>({id:t.id||"temp",cpf:t.cpf,name:`${t.nome} ${t.sobrenome}`,email:t.email||"",phone:t.telefone||"",createdAt:t.created_at,logradouro:t.logradouro,numero:t.numero,complemento:t.complemento||void 0,bairro:t.bairro,cep:t.cep,cidade:t.cidade,estado:t.estado});return e.jsxs("div",{className:`flex flex-col gap-4 animate-in slide-in-from-right duration-500 ${c?"p-0":""} relative w-full min-w-0 pb-20 md:pb-0`,children:[e.jsx("div",{className:"shrink-0 flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d!=="list"&&!c&&e.jsxs("button",{onClick:ke,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-white/10 transition-colors mr-1",children:[" ",e.jsx(Xe,{className:"w-6 h-6 text-slate-600 dark:text-white"})," "]}),!c&&e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight flex items-center gap-3",children:[e.jsx(Y,{className:"w-8 h-8 text-brand-600 dark:text-brand-400"}),d==="details"?`${l==null?void 0:l.nome} ${(Ce=l==null?void 0:l.sobrenome)==null?void 0:Ce.split(" ")[0]}`:"Gestão de Cidadãos"]}),e.jsx("p",{className:"text-slate-500 dark:text-blue-200/50 mt-1 font-medium hidden sm:block",children:d==="list"&&"Base de contatos unificada."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[d==="list"&&!c&&e.jsxs("div",{className:"relative w-full md:w-[320px] group",children:[e.jsx("input",{type:"text",value:v,onChange:t=>O(t.target.value),placeholder:"Buscar por nome ou telefone...",className:"w-full pl-11 pr-10 py-3 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-xl outline-none focus:border-brand-500 focus:bg-white dark:focus:bg-black/20 transition-all font-medium text-slate-700 dark:text-white placeholder:text-slate-400 h-11 text-sm"}),e.jsx(Je,{className:"w-5 h-5 text-slate-400 absolute left-3.5 top-3 group-focus-within:text-brand-500 transition-colors"}),v&&e.jsx("button",{onClick:()=>O(""),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600 dark:hover:text-white",children:e.jsx(Ye,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[d==="list"&&!c&&e.jsx("button",{onClick:Ge,className:"w-auto px-4 py-2.5 rounded-xl font-bold bg-white dark:bg-white/5 text-slate-600 dark:text-white/70 border border-slate-200 dark:border-white/10 hover:bg-slate-50 dark:hover:bg-white/10 transition-all flex items-center justify-center gap-2 h-11",title:"Exportar CSV",children:e.jsx(Ze,{className:"w-5 h-5"})}),d==="list"&&_&&e.jsxs("button",{onClick:ve,className:"w-full sm:w-auto px-5 py-2.5 bg-brand-600 hover:bg-brand-500 text-white rounded-xl font-bold shadow-lg shadow-brand-500/20 transition-all flex items-center justify-center gap-2 active:scale-95 duration-200 h-11",children:[e.jsx(Se,{className:"w-5 h-5"})," ",e.jsx("span",{className:"whitespace-nowrap",children:"Novo Cidadão"})]}),d==="details"&&l&&!c&&e.jsxs("div",{className:"flex gap-2",children:[_&&e.jsxs("button",{onClick:qe,className:"px-4 py-2.5 bg-slate-100 dark:bg-white/10 text-slate-700 dark:text-white rounded-xl font-bold border border-slate-200 dark:border-white/5 flex items-center gap-2 hover:bg-slate-200 transition-colors active:scale-95 duration-200 h-11",children:[e.jsx(Me,{className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Editar"})]}),D&&e.jsxs("button",{onClick:()=>D(l.id||""),className:"px-4 py-2.5 bg-brand-600 hover:bg-brand-500 text-white rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 active:scale-95 duration-200 h-11",children:[e.jsx(et,{className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Nova Demanda"})]})]})]})]})]})}),e.jsxs("div",{className:"flex flex-col min-h-0 w-full relative",children:[d==="list"&&e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[!c&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 shrink-0",children:[" ",e.jsx(F,{title:"Total Cidadãos",value:I.total,icon:Y,colorClass:"bg-blue-500",textClass:"text-blue-600 dark:text-blue-400"})," ",e.jsx(F,{title:"Novos Hoje",value:I.newToday,icon:Se,colorClass:"bg-green-500",textClass:"text-green-600 dark:text-green-400"})," ",e.jsx(F,{title:"Top Bairro",value:I.topBairro,icon:Ee,colorClass:"bg-brand-500",textClass:"text-brand-600 dark:text-brand-400"})," ",e.jsx(F,{title:"Cadastros (Bairro)",value:I.topBairroCount,icon:tt,colorClass:"bg-purple-500",textClass:"text-purple-600 dark:text-purple-400"})," "]}),e.jsx("div",{className:"flex flex-col min-h-0 glass-panel rounded-3xl border border-slate-200 dark:border-white/10 bg-white/50 dark:bg-slate-900/50 shadow-sm relative w-full",children:Pe?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 dark:text-white/40 py-20",children:[e.jsx(De,{className:"w-8 h-8 animate-spin mb-2 text-brand-500"}),e.jsx("p",{children:"Carregando..."})]}):C.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 dark:text-white/40 py-20",children:[e.jsx(Y,{className:"w-12 h-12 mb-2 opacity-20"}),e.jsx("p",{children:"Nenhum cidadão encontrado."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full relative",children:[e.jsxs("table",{className:"w-full text-left border-collapse hidden md:table",children:[e.jsxs("thead",{className:"bg-slate-50/90 dark:bg-slate-900/90 backdrop-blur-sm border-b border-slate-200 dark:border-white/10",children:[" ",e.jsxs("tr",{className:"text-xs font-bold text-slate-500 dark:text-blue-200/50 uppercase tracking-wider",children:[" ",e.jsx("th",{className:"p-4 first:pl-6 w-[45%] min-w-[200px]",children:"Cidadão"})," ",e.jsx("th",{className:"p-4 w-[20%] whitespace-nowrap",children:"Contato"})," ",e.jsx("th",{className:"p-4 w-[25%] min-w-[150px]",children:"Localização"})," ",e.jsx("th",{className:"p-4 text-right last:pr-6 w-[10%]",children:"Ação"})," "]})," "]}),e.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-white/5 text-sm",children:[" ",ye.map((t,a)=>e.jsxs("tr",{onClick:()=>Ne(t),className:"hover:bg-white/60 dark:hover:bg-white/5 transition-colors cursor-pointer group",children:[" ",e.jsxs("td",{className:"p-4 first:pl-6",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[" ",e.jsx("div",{className:"w-9 h-9 rounded-full bg-slate-100 dark:bg-white/10 flex items-center justify-center text-slate-600 dark:text-white font-bold text-xs border border-slate-200 dark:border-white/10 shrink-0",children:t.nome.charAt(0)})," ",e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"font-bold text-slate-900 dark:text-white truncate",children:[t.nome," ",t.sobrenome]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-white/50 truncate",children:t.email||"Sem email"})]})," "]})," "]})," ",e.jsx("td",{className:"p-4 text-slate-600 dark:text-white/80 whitespace-nowrap",children:t.telefone?E(t.telefone):"-"})," ",e.jsx("td",{className:"p-4 text-slate-600 dark:text-white/80",children:t.bairro?e.jsxs("span",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate",children:t.bairro}),e.jsxs("span",{className:"text-[10px] text-slate-400 truncate",children:[t.cidade,"/",t.estado]})]}):"-"})," ",e.jsx("td",{className:"p-4 text-right last:pr-6",children:e.jsx("div",{className:"p-2 text-slate-400 group-hover:text-brand-600 transition-colors inline-flex bg-slate-100 dark:bg-white/5 rounded-lg group-hover:bg-brand-50 dark:group-hover:bg-brand-500/10",children:c?e.jsx("span",{className:"px-3 py-1 bg-brand-500 text-white text-xs font-bold rounded-lg shadow-sm",children:"Selecionar"}):e.jsx(Le,{className:"w-4 h-4"})})})," "]},t.id||a))," "]})]}),e.jsx("div",{className:"md:hidden space-y-3 p-3",children:ye.map((t,a)=>e.jsxs("div",{onClick:()=>Ne(t),className:"glass-panel p-4 rounded-2xl border border-slate-200 dark:border-white/10 shadow-sm active:scale-[0.98] transition-all cursor-pointer flex items-center justify-between min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-white/10 flex items-center justify-center font-bold text-lg text-slate-600 dark:text-white border border-slate-200 dark:border-white/10 shrink-0",children:t.nome.charAt(0)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"font-bold text-slate-900 dark:text-white truncate text-base",children:[t.nome," ",t.sobrenome]}),e.jsxs("div",{className:"flex flex-col gap-0.5 text-xs text-slate-500 dark:text-white/50 mt-0.5",children:[e.jsx("span",{className:"font-mono",children:t.telefone?E(t.telefone):"Sem Telefone"}),t.bairro&&e.jsxs("span",{className:"truncate flex items-center gap-1",children:[e.jsx(Ee,{className:"w-3 h-3"})," ",t.bairro]})]})]})]}),e.jsxs("div",{className:"text-slate-400 group-hover:text-brand-600 transition-colors shrink-0 ml-2",children:[" ",c?e.jsx("span",{className:"px-3 py-1 bg-brand-500 text-white text-xs font-bold rounded-lg shadow-sm",children:"OK"}):e.jsx(Le,{className:"w-5 h-5"})," "]})]},t.id||a))})]}),e.jsxs("div",{className:"shrink-0 bg-slate-50/50 dark:bg-slate-900/50 border-t border-slate-200 dark:border-white/5 z-20",children:[" ",e.jsx(Ke,{currentPage:U,totalPages:Ve,onPageChange:te,totalItems:C.length,itemsPerPage:B})," "]})," "]})})]}),d==="details"&&l&&!c&&e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:e.jsxs("div",{className:"glass-panel p-6 rounded-3xl border border-slate-200 dark:border-white/10 relative overflow-hidden",children:[" ",e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-400 to-blue-600"})," ",e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start text-center md:text-left",children:[" ",e.jsxs("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-white dark:bg-slate-800 border-4 border-slate-100 dark:border-white/5 shadow-xl flex items-center justify-center shrink-0",children:[" ",e.jsx("span",{className:"text-3xl md:text-4xl font-bold text-brand-600 dark:text-brand-400",children:l.nome.charAt(0)})," "]})," ",e.jsxs("div",{className:"flex-1",children:[" ",e.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white",children:[l.nome," ",l.sobrenome]})," ",e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 justify-center md:justify-start",children:[" ",l.telefone&&e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-green-50 dark:bg-green-500/10 text-green-700 dark:text-green-300 text-sm font-medium flex items-center gap-2 border border-green-200 dark:border-green-500/20",children:[e.jsx(st,{className:"w-3.5 h-3.5"})," ",E(l.telefone)]})," ",l.email&&e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-blue-50 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 text-sm font-medium flex items-center gap-2 border border-blue-200 dark:border-blue-500/20",children:[e.jsx(at,{className:"w-3.5 h-3.5"})," ",l.email]})," "]})," "]})," "]})," "]})})}),d==="form"&&e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"glass-panel p-4 md:p-8 rounded-3xl border border-slate-200 dark:border-white/10 max-w-3xl mx-auto w-full animate-in fade-in slide-in-from-bottom-4 mb-20 md:mb-0",children:[e.jsxs("div",{className:"text-center mb-8",children:[" ",e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:N?"Editar Cadastro":"Novo Cidadão"})," ",e.jsx("p",{className:"text-slate-500 dark:text-white/50",children:"Preencha os dados do munícipe."})," "]}),e.jsxs("form",{onSubmit:Re,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400 dark:text-white/40 border-b border-slate-200 dark:border-white/10 pb-2 mb-4",children:"Identificação"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:le,onChange:t=>V(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Sobrenome"}),e.jsx("input",{type:"text",value:oe,onChange:t=>G(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Telefone (Obrigatório)"}),e.jsx("input",{type:"text",value:A,onChange:t=>W(E(t.target.value)),onBlur:He,className:`w-full p-3 rounded-xl border ${Q?"border-red-500":"border-slate-300 dark:border-white/10"} glass-input outline-none focus:border-brand-500`,placeholder:"(00) 00000-0000"}),Q&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:Q})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Email (Opcional)"}),e.jsx("input",{type:"email",value:ne,onChange:t=>Oe(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500",placeholder:"exemplo@email.com",autoComplete:"off"}),ie.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-white/10 rounded-xl shadow-lg z-50 overflow-hidden animate-in fade-in zoom-in-95",children:ie.map(t=>e.jsx("button",{type:"button",onClick:()=>Ue(t),className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-white hover:bg-slate-50 dark:hover:bg-white/10 transition-colors",children:t},t))})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white/95 dark:bg-[#0b1121]/95 backdrop-blur-md border-t border-slate-200 dark:border-white/10 z-30 flex gap-3 md:static md:bg-transparent md:p-0 md:border-0 pb-6",children:[e.jsx("button",{type:"button",onClick:ke,className:"px-6 py-3 rounded-xl border border-slate-200 dark:border-white/10 text-slate-500 dark:text-white/60 hover:bg-slate-50 dark:hover:bg-white/5 font-bold flex-1 active:scale-95 duration-200 transition-transform",children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:pe||!!y&&!N,className:"px-6 py-3 bg-brand-600 hover:bg-brand-500 text-white rounded-xl font-bold shadow-lg shadow-brand-500/20 flex-1 flex items-center justify-center gap-2 disabled:opacity-50 active:scale-95 duration-200 transition-transform",children:[pe?e.jsx(De,{className:"w-5 h-5 animate-spin"}):e.jsx(rt,{className:"w-5 h-5"})," Salvar"]})]})]})]})})]}),re&&e.jsx(Qe,{demand:re,citizen:l?We(l):null,onClose:()=>R(null),onEdit:t=>{R(null),L&&L(t)},onUpdateStatus:(t,a)=>{u&&u(t,a),se(s=>s.map(n=>n.id===t?{...n,status:a}:n)),R(s=>s?{...s,status:a}:null)},onInteractionUpdate:q,onNotification:i})]})};export{bt as default};
