import{i as E,s as m,j as e,S as R,f as D,P as et,D as tt,a as le}from"./index-CKHrgYzX.js";import{r,G as st,U as oe,j as at,X as rt,a0 as lt,$ as ot,ai as Ie,a4 as nt,n as dt,m as _e,x as it,k as ne,w as qe,q as ct,t as xt,o as mt}from"./vendor-CC2eIyRy.js";import"./db-DxBk-dGO.js";import"./maps-BiYucuft.js";const ht=(c,w,f)=>{if(!c||c.length===0){alert("Não há dados para exportar com os filtros atuais.");return}const L="data:text/csv;charset=utf-8,"+"\uFEFF"+[w.join(","),...c.map(d=>d.join(","))].join(`
`),$=encodeURI(L),u=document.createElement("a"),j=new Date,V=j.toLocaleDateString("pt-BR").split("/").reverse().join("-"),P=j.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}).replace(":","-");u.setAttribute("href",$),u.setAttribute("download",`${f}_${V}_${P}.csv`),document.body.appendChild(u),u.click(),document.body.removeChild(u)},vt=({isModalMode:c=!1,onSelectPerson:w,initialSearchTerm:f,initialMode:k="list",onCreateDemand:L,onEditDemand:$,onUpdateStatus:u,onModeChange:j,onInteractionUpdate:V,onPersonUpdate:P,onNotification:d,permissions:de,onClearSelection:ie,demands:ce=[]})=>{var Fe;const[i,p]=r.useState("list"),[l,B]=r.useState(null),[b,G]=r.useState([]),[v,W]=r.useState(""),[He,xe]=r.useState(!1),[K,me]=r.useState(1),z=10,[bt,he]=r.useState([]),[ut,be]=r.useState(!1),[ue,X]=r.useState(null),[N,T]=r.useState(!1),[y,Ue]=r.useState(!1),[fe,J]=r.useState(""),[pe,Q]=r.useState(""),[ge,A]=r.useState(""),[we,g]=r.useState([]),[F,Y]=r.useState(""),[Z,M]=r.useState(""),[Oe,je]=r.useState(!1),[ve,I]=r.useState(""),[ke,ee]=r.useState(""),[Ne,te]=r.useState(""),[ye,_]=r.useState(""),[Ce,q]=r.useState(""),[Se,H]=r.useState(""),[ft,Ee]=r.useState(!1),[De,Le]=r.useState(!1),[C,se]=r.useState(null),[ae,re]=r.useState(null),U=de?de.canCreateCitizen:!0;r.useEffect(()=>{j&&j(i)},[i,j]),r.useEffect(()=>{k&&k!=="list"&&k==="form"&&i!=="form"&&Be()},[k]),r.useEffect(()=>{f?(async()=>{const a=le(f);if(E()&&m){const{data:s}=await m.from("citizens").select("*").eq("telefone",a).maybeSingle();s?(G([s]),B(s),p("details")):(W(f),p("list"))}})():i==="list"&&$e()},[f]),r.useEffect(()=>{i==="list"&&!f&&b.length===0&&$e()},[i]),r.useEffect(()=>{i==="details"&&l&&Re(l.id||"")},[i,l]);const $e=async()=>{xe(!0);try{if(E()&&m){const{data:t,error:a}=await m.from("citizens").select("*").order("created_at",{ascending:!1}).limit(1e3);if(a)throw a;t&&G(t)}}catch(t){console.error("Erro ao buscar pessoas:",t)}finally{xe(!1)}},Re=async t=>{be(!0);try{if(E()&&m){let a=m.from("demands").select("*").eq("citizen_id",t);const{data:s,error:n}=await a.order("created_at",{ascending:!1});if(n)throw n;if(s){const x=s.map(o=>({id:o.id,title:o.title,description:o.description,level:o.level,status:o.status,priority:o.priority,type:o.type,deadline:o.deadline,citizenId:o.citizen_id,createdAt:o.created_at,tags:o.tags}));he(x)}}}catch(a){console.error("Erro ao buscar histórico:",a)}finally{be(!1)}},Pe=()=>{J(""),Q(""),A(""),g([]),Y(""),M(""),I(""),ee(""),te(""),_(""),q(""),H(""),se(null),T(!1),re(null)},Be=()=>{if(!U){d&&d("error","Sem permissão para criar cidadãos.");return}Pe(),T(!1),p("form")},ze=()=>{Pe(),B(null),p("list"),ie&&ie()},Te=t=>{if(c&&w){w(t);return}B(t),p("details")},Ve=()=>{if(l){if(!U){d&&d("error","Sem permissão para editar.");return}J(l.nome||""),Q(l.sobrenome||""),A(l.email||""),Y(D(l.telefone||"")),M(l.cep||""),I(l.logradouro||""),ee(l.numero||""),te(l.complemento||""),_(l.bairro||""),q(l.cidade||""),H(l.estado||""),se(l),T(!0),p("form")}},Ge=async()=>{if(N)return;const t=le(F);if(t){if(t.length<10){re("Telefone inválido");return}Ee(!0);try{if(E()&&m){const{data:a}=await m.from("citizens").select("*").eq("telefone",t).maybeSingle();a&&(se(a),d&&d("error","Este telefone já possui cadastro."))}}catch(a){console.error(a)}finally{Ee(!1)}}},We=async()=>{const t=Z.replace(/\D/g,"");if(t.length===8){je(!0);try{const s=await(await fetch(`https://viacep.com.br/ws/${t}/json/`)).json();s.erro||(I(s.logradouro),_(s.bairro),q(s.localidade),H(s.uf))}catch(a){console.error(a)}finally{je(!1)}}},Ke=t=>{if(A(t),!t){g([]);return}const a=["gmail.com","hotmail.com","outlook.com","yahoo.com.br","icloud.com"];if(a.some(s=>t.endsWith("@"+s))){g([]);return}if(!t.includes("@"))g(a.map(s=>`${t}@${s}`));else{const[s,n]=t.split("@"),x=a.filter(o=>o.startsWith(n));x.length>0?g(x.map(o=>`${s}@${o}`)):g([])}},Xe=t=>{A(t),g([])},Je=async t=>{t.preventDefault();const a=F?le(F):null;if(!a){re("É necessário informar o Telefone."),d&&d("error","Informe o Telefone.");return}Le(!0);const s={nome:fe,sobrenome:pe,email:ge||null,telefone:a,cep:Z.replace(/\D/g,""),logradouro:ve,numero:ke,complemento:Ne||null,bairro:ye,cidade:Ce,estado:Se.substring(0,2).toUpperCase()};try{if(E()&&m){let n;if(N&&(C!=null&&C.id)){const{data:o,error:h}=await m.from("citizens").update(s).eq("id",C.id).select().single();if(h)throw h;n=o,d&&d("success","Dados atualizados!")}else{const{data:o,error:h}=await m.from("citizens").insert(s).select().single();if(h)throw h;n=o,d&&d("success","Cidadão cadastrado!")}P&&P();const x=N?b.map(o=>o.id===n.id?n:o):[n,...b];G(x),c&&w?w(n):setTimeout(()=>{B(n),p("details"),T(!1)},1500)}else d&&d("error","Erro de conexão.")}catch(n){d&&d("error",`Erro: ${n.message}`)}finally{Le(!1)}},S=r.useMemo(()=>b.filter(t=>{const a=v.toLowerCase(),s=`${t.nome} ${t.sobrenome}`.toLowerCase(),n=t.telefone?t.telefone.replace(/\D/g,""):"",x=v.replace(/\D/g,""),o=s.includes(a)||x.length>3&&n.includes(x)||t.email&&t.email.toLowerCase().includes(a);let h=!0;return y&&(h=ce.some(Me=>Me.citizenId===t.id)),o&&h}),[b,v,y,ce]),O=r.useMemo(()=>{const t=b.length,a=new Date().toDateString(),s=b.filter(o=>o.created_at&&new Date(o.created_at).toDateString()===a).length,n={};b.forEach(o=>{o.bairro&&(n[o.bairro]=(n[o.bairro]||0)+1)});const x=Object.entries(n).sort((o,h)=>h[1]-o[1])[0];return{total:t,newToday:s,topBairro:x?x[0]:"N/A",topBairroCount:x?x[1]:0}},[b]);r.useEffect(()=>{me(1)},[v,y]);const Qe=Math.ceil(S.length/z),Ae=S.slice((K-1)*z,K*z),Ye=()=>{const t=["Nome","Sobrenome","Telefone","Email","Logradouro","Número","Bairro","Cidade","UF","CEP","Data Cadastro"],a=S.map(s=>[`"${s.nome}"`,`"${s.sobrenome}"`,s.telefone||"",s.email||"",`"${s.logradouro}"`,s.numero,`"${s.bairro}"`,`"${s.cidade}"`,s.estado,s.cep,s.created_at?new Date(s.created_at).toLocaleDateString():""]);ht(a,t,"Cidadaos")},Ze=t=>({id:t.id||"temp",cpf:t.cpf,name:`${t.nome} ${t.sobrenome}`,email:t.email||"",phone:t.telefone||"",createdAt:t.created_at,logradouro:t.logradouro,numero:t.numero,complemento:t.complemento||void 0,bairro:t.bairro,cep:t.cep,cidade:t.cidade,estado:t.estado});return e.jsxs("div",{className:`flex flex-col gap-4 animate-in slide-in-from-right duration-500 ${c?"p-0":""} relative w-full min-w-0 pb-20 md:pb-0`,children:[e.jsx("div",{className:"shrink-0 flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i!=="list"&&!c&&e.jsxs("button",{onClick:ze,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-white/10 transition-colors mr-1",children:[" ",e.jsx(st,{className:"w-6 h-6 text-slate-600 dark:text-white"})," "]}),!c&&e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight flex items-center gap-3",children:[e.jsx(oe,{className:"w-8 h-8 text-brand-600 dark:text-brand-400"}),i==="details"?`${l==null?void 0:l.nome} ${(Fe=l==null?void 0:l.sobrenome)==null?void 0:Fe.split(" ")[0]}`:"Gestão de Cidadãos"]}),e.jsx("p",{className:"text-slate-500 dark:text-blue-200/50 mt-1 font-medium hidden sm:block",children:i==="list"&&"Base de contatos unificada."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 w-full md:w-auto",children:[i==="list"&&!c&&e.jsx("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:e.jsxs("div",{className:"relative w-full md:w-[280px] group",children:[e.jsx("input",{type:"text",value:v,onChange:t=>W(t.target.value),placeholder:"Buscar por nome ou telefone...",className:"w-full pl-11 pr-10 py-3 bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded-xl outline-none focus:border-brand-500 focus:bg-white dark:focus:bg-black/20 transition-all font-medium text-slate-700 dark:text-white placeholder:text-slate-400 h-11 text-sm"}),e.jsx(at,{className:"w-5 h-5 text-slate-400 absolute left-3.5 top-3 group-focus-within:text-brand-500 transition-colors"}),v&&e.jsx("button",{onClick:()=>W(""),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600 dark:hover:text-white",children:e.jsx(rt,{className:"w-5 h-5"})})]})}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[i==="list"&&!c&&e.jsxs("button",{onClick:()=>Ue(!y),className:`w-auto px-4 py-2.5 rounded-xl font-bold border transition-all flex items-center justify-center gap-2 h-11 text-sm ${y?"bg-brand-50 border-brand-200 text-brand-700 dark:bg-brand-500/20 dark:border-brand-500/30 dark:text-brand-300":"bg-white dark:bg-white/5 text-slate-600 dark:text-white/70 border-slate-200 dark:border-white/10 hover:bg-slate-50 dark:hover:bg-white/10"}`,title:"Apenas com Demandas",children:[e.jsx(lt,{className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Com Demandas"})]}),i==="list"&&!c&&e.jsx("button",{onClick:Ye,className:"w-auto px-4 py-2.5 rounded-xl font-bold bg-white dark:bg-white/5 text-slate-600 dark:text-white/70 border border-slate-200 dark:border-white/10 hover:bg-slate-50 dark:hover:bg-white/10 transition-all flex items-center justify-center gap-2 h-11",title:"Exportar CSV",children:e.jsx(ot,{className:"w-5 h-5"})}),i==="list"&&U&&e.jsxs("button",{onClick:Be,className:"w-full sm:w-auto px-5 py-2.5 bg-brand-600 hover:bg-brand-500 text-white rounded-xl font-bold shadow-lg shadow-brand-500/20 transition-all flex items-center justify-center gap-2 active:scale-95 duration-200 h-11",children:[e.jsx(Ie,{className:"w-5 h-5"})," ",e.jsx("span",{className:"whitespace-nowrap",children:"Novo Cidadão"})]}),i==="details"&&l&&!c&&e.jsxs("div",{className:"flex gap-2",children:[U&&e.jsxs("button",{onClick:Ve,className:"px-4 py-2.5 bg-slate-100 dark:bg-white/10 text-slate-700 dark:text-white rounded-xl font-bold border border-slate-200 dark:border-white/5 flex items-center gap-2 hover:bg-slate-200 transition-colors active:scale-95 duration-200 h-11",children:[e.jsx(nt,{className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Editar"})]}),L&&e.jsxs("button",{onClick:()=>L(l.id||""),className:"px-4 py-2.5 bg-brand-600 hover:bg-brand-500 text-white rounded-xl font-bold shadow-lg transition-all flex items-center gap-2 active:scale-95 duration-200 h-11",children:[e.jsx(dt,{className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:"Nova Demanda"})]})]})]})]})]})}),e.jsxs("div",{className:"flex flex-col min-h-0 w-full relative",children:[i==="list"&&e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[!c&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 shrink-0",children:[" ",e.jsx(R,{title:"Total Cidadãos",value:O.total,icon:oe,colorClass:"bg-blue-500",textClass:"text-blue-600 dark:text-blue-400"})," ",e.jsx(R,{title:"Novos Hoje",value:O.newToday,icon:Ie,colorClass:"bg-green-500",textClass:"text-green-600 dark:text-green-400"})," ",e.jsx(R,{title:"Top Bairro",value:O.topBairro,icon:_e,colorClass:"bg-brand-500",textClass:"text-brand-600 dark:text-brand-400"})," ",e.jsx(R,{title:"Cadastros (Bairro)",value:O.topBairroCount,icon:it,colorClass:"bg-purple-500",textClass:"text-purple-600 dark:text-purple-400"})," "]}),e.jsx("div",{className:"flex flex-col min-h-0 glass-panel rounded-3xl border border-slate-200 dark:border-white/10 bg-white/50 dark:bg-slate-900/50 shadow-sm relative w-full",children:He?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 dark:text-white/40 py-20",children:[e.jsx(ne,{className:"w-8 h-8 animate-spin mb-2 text-brand-500"}),e.jsx("p",{children:"Carregando..."})]}):S.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 dark:text-white/40 py-20",children:[e.jsx(oe,{className:"w-12 h-12 mb-2 opacity-20"}),e.jsx("p",{children:"Nenhum cidadão encontrado."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full relative",children:[e.jsxs("table",{className:"w-full text-left border-collapse hidden md:table",children:[e.jsxs("thead",{className:"bg-slate-50/90 dark:bg-slate-900/90 backdrop-blur-sm border-b border-slate-200 dark:border-white/10",children:[" ",e.jsxs("tr",{className:"text-xs font-bold text-slate-500 dark:text-blue-200/50 uppercase tracking-wider",children:[" ",e.jsx("th",{className:"p-4 first:pl-6 w-[45%] min-w-[200px]",children:"Cidadão"})," ",e.jsx("th",{className:"p-4 w-[20%] whitespace-nowrap",children:"Contato"})," ",e.jsx("th",{className:"p-4 w-[25%] min-w-[150px]",children:"Localização"})," ",e.jsx("th",{className:"p-4 text-right last:pr-6 w-[10%]",children:"Ação"})," "]})," "]}),e.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-white/5 text-sm",children:[" ",Ae.map((t,a)=>e.jsxs("tr",{onClick:()=>Te(t),className:"hover:bg-white/60 dark:hover:bg-white/5 transition-colors cursor-pointer group",children:[" ",e.jsxs("td",{className:"p-4 first:pl-6",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[" ",e.jsx("div",{className:"w-9 h-9 rounded-full bg-slate-100 dark:bg-white/10 flex items-center justify-center text-slate-600 dark:text-white font-bold text-xs border border-slate-200 dark:border-white/10 shrink-0",children:t.nome.charAt(0)})," ",e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"font-bold text-slate-900 dark:text-white truncate",children:[t.nome," ",t.sobrenome]}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-white/50 truncate",children:t.email||""})]})," "]})," "]})," ",e.jsx("td",{className:"p-4 text-slate-600 dark:text-white/80 whitespace-nowrap",children:t.telefone?D(t.telefone):"-"})," ",e.jsx("td",{className:"p-4 text-slate-600 dark:text-white/80",children:t.bairro?e.jsxs("span",{className:"flex flex-col",children:[e.jsx("span",{className:"truncate",children:t.bairro}),e.jsxs("span",{className:"text-[10px] text-slate-400 truncate",children:[t.cidade,"/",t.estado]})]}):"-"})," ",e.jsx("td",{className:"p-4 text-right last:pr-6",children:e.jsx("div",{className:"p-2 text-slate-400 group-hover:text-brand-600 transition-colors inline-flex bg-slate-100 dark:bg-white/5 rounded-lg group-hover:bg-brand-50 dark:group-hover:bg-brand-500/10",children:c?e.jsx("span",{className:"px-3 py-1 bg-brand-500 text-white text-xs font-bold rounded-lg shadow-sm",children:"Selecionar"}):e.jsx(qe,{className:"w-4 h-4"})})})," "]},t.id||a))," "]})]}),e.jsx("div",{className:"md:hidden space-y-3 p-3",children:Ae.map((t,a)=>e.jsxs("div",{onClick:()=>Te(t),className:"glass-panel p-4 rounded-2xl border border-slate-200 dark:border-white/10 shadow-sm active:scale-[0.98] transition-all cursor-pointer flex items-center justify-between min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-white/10 flex items-center justify-center font-bold text-lg text-slate-600 dark:text-white border border-slate-200 dark:border-white/10 shrink-0",children:t.nome.charAt(0)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("p",{className:"font-bold text-slate-900 dark:text-white truncate text-base",children:[t.nome," ",t.sobrenome]}),e.jsxs("div",{className:"flex flex-col gap-0.5 text-xs text-slate-500 dark:text-white/50 mt-0.5",children:[e.jsx("span",{className:"font-mono",children:t.telefone?D(t.telefone):"Sem Telefone"}),t.bairro&&e.jsxs("span",{className:"truncate flex items-center gap-1",children:[e.jsx(_e,{className:"w-3 h-3"})," ",t.bairro]})]})]})]}),e.jsxs("div",{className:"text-slate-400 group-hover:text-brand-600 transition-colors shrink-0 ml-2",children:[" ",c?e.jsx("span",{className:"px-3 py-1 bg-brand-500 text-white text-xs font-bold rounded-lg shadow-sm",children:"OK"}):e.jsx(qe,{className:"w-5 h-5"})," "]})]},t.id||a))})]}),e.jsxs("div",{className:"shrink-0 bg-slate-50/50 dark:bg-slate-900/50 border-t border-slate-200 dark:border-white/5 z-20",children:[" ",e.jsx(et,{currentPage:K,totalPages:Qe,onPageChange:me,totalItems:S.length,itemsPerPage:z})," "]})," "]})})]}),i==="details"&&l&&!c&&e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:e.jsxs("div",{className:"glass-panel p-6 rounded-3xl border border-slate-200 dark:border-white/10 relative overflow-hidden",children:[" ",e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-400 to-blue-600"})," ",e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start text-center md:text-left",children:[" ",e.jsxs("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-white dark:bg-slate-800 border-4 border-slate-100 dark:border-white/5 shadow-xl flex items-center justify-center shrink-0",children:[" ",e.jsx("span",{className:"text-3xl md:text-4xl font-bold text-brand-600 dark:text-brand-400",children:l.nome.charAt(0)})," "]})," ",e.jsxs("div",{className:"flex-1",children:[" ",e.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white",children:[l.nome," ",l.sobrenome]})," ",e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4 justify-center md:justify-start",children:[" ",l.telefone&&e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-green-50 dark:bg-green-500/10 text-green-700 dark:text-green-300 text-sm font-medium flex items-center gap-2 border border-green-200 dark:border-green-500/20",children:[e.jsx(ct,{className:"w-3.5 h-3.5"})," ",D(l.telefone)]})," ",l.email&&e.jsxs("div",{className:"px-3 py-1.5 rounded-lg bg-blue-50 dark:bg-blue-500/10 text-blue-700 dark:text-blue-300 text-sm font-medium flex items-center gap-2 border border-blue-200 dark:border-blue-500/20",children:[e.jsx(xt,{className:"w-3.5 h-3.5"})," ",l.email]})," "]})," "]})," "]})," "]})})}),i==="form"&&e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"glass-panel p-4 md:p-8 rounded-3xl border border-slate-200 dark:border-white/10 max-w-3xl mx-auto w-full animate-in fade-in slide-in-from-bottom-4 mb-20 md:mb-0",children:[e.jsxs("div",{className:"text-center mb-8",children:[" ",e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2",children:N?"Editar Cadastro":"Novo Cidadão"})," ",e.jsx("p",{className:"text-slate-500 dark:text-white/50",children:"Preencha os dados do munícipe."})," "]}),e.jsxs("form",{onSubmit:Je,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400 dark:text-white/40 border-b border-slate-200 dark:border-white/10 pb-2 mb-4",children:"Identificação"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:fe,onChange:t=>J(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Sobrenome"}),e.jsx("input",{type:"text",value:pe,onChange:t=>Q(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Telefone (Obrigatório)"}),e.jsx("input",{type:"text",value:F,onChange:t=>Y(D(t.target.value)),onBlur:Ge,className:`w-full p-3 rounded-xl border ${ae?"border-red-500":"border-slate-300 dark:border-white/10"} glass-input outline-none focus:border-brand-500`,placeholder:"(00) 00000-0000"}),ae&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:ae})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Email (Opcional)"}),e.jsx("input",{type:"email",value:ge,onChange:t=>Ke(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500",placeholder:"exemplo@email.com",autoComplete:"off"}),we.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-900 border border-slate-200 dark:border-white/10 rounded-xl shadow-lg z-50 overflow-hidden animate-in fade-in zoom-in-95",children:we.map(t=>e.jsx("button",{type:"button",onClick:()=>Xe(t),className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-white hover:bg-slate-50 dark:hover:bg-white/10 transition-colors",children:t},t))})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-100 dark:border-white/5",children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-wider text-slate-400 dark:text-white/40 border-b border-slate-200 dark:border-white/10 pb-2 mb-4",children:"Endereço"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"CEP"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:Z,onChange:t=>M(t.target.value),onBlur:We,className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500",placeholder:"00000-000"}),Oe&&e.jsx(ne,{className:"absolute right-3 top-3 w-5 h-5 text-brand-500 animate-spin"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Logradouro"}),e.jsx("input",{type:"text",value:ve,onChange:t=>I(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Número"}),e.jsx("input",{type:"text",value:ke,onChange:t=>ee(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Complemento"}),e.jsx("input",{type:"text",value:Ne,onChange:t=>te(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Bairro"}),e.jsx("input",{type:"text",value:ye,onChange:t=>_(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"Cidade"}),e.jsx("input",{type:"text",value:Ce,onChange:t=>q(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 dark:text-white/50 mb-1",children:"UF"}),e.jsx("input",{type:"text",value:Se,onChange:t=>H(t.target.value),className:"w-full p-3 rounded-xl border border-slate-300 dark:border-white/10 glass-input outline-none focus:border-brand-500 uppercase",maxLength:2})]})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-white/95 dark:bg-[#0b1121]/95 backdrop-blur-md border-t border-slate-200 dark:border-white/10 z-30 flex gap-3 md:static md:bg-transparent md:p-0 md:border-0 pb-6",children:[e.jsx("button",{type:"button",onClick:ze,className:"px-6 py-3 rounded-xl border border-slate-200 dark:border-white/10 text-slate-500 dark:text-white/60 hover:bg-slate-50 dark:hover:bg-white/5 font-bold flex-1 active:scale-95 duration-200 transition-transform",children:"Cancelar"}),e.jsxs("button",{type:"submit",disabled:De||!!C&&!N,className:"px-6 py-3 bg-brand-600 hover:bg-brand-500 text-white rounded-xl font-bold shadow-lg shadow-brand-500/20 flex-1 flex items-center justify-center gap-2 disabled:opacity-50 active:scale-95 duration-200 transition-transform",children:[De?e.jsx(ne,{className:"w-5 h-5 animate-spin"}):e.jsx(mt,{className:"w-5 h-5"})," Salvar"]})]})]})]})})]}),ue&&e.jsx(tt,{demand:ue,citizen:l?Ze(l):null,onClose:()=>X(null),onEdit:t=>{X(null),$&&$(t)},onUpdateStatus:(t,a)=>{u&&u(t,a),he(s=>s.map(n=>n.id===t?{...n,status:a}:n)),X(s=>s?{...s,status:a}:null)},onInteractionUpdate:V,onNotification:d})]})};export{vt as default};
